<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
      </script>
   <link rel="stylesheet" href="../src/css/style.css">
   <title>SAO</title>
</head>

<body>
   <header class="py-3 border-bottom">
      <div class="container-fluid row align-items-center">
         <div class="dropdown col-12 col-lg-3 col-md-3">
            <a href="../html/index.html"
               class="d-flex align-items-center col-lg-4 mb-2 mb-lg-0 link-body-emphasis text-decoration-none">
               <img src="../src/img/wallpaper/logo.png" alt="logo-Sao" class="d-block " width="100" height="40"
                  style="margin: 0 auto;">
            </a>
         </div>

         <div class="d-flex align-items-center d-grid gap-2 align-items-center col-12 col-lg-9 col-md-9"
            style="grid-template-columns: 95% 1fr;">
            <!-- Search -->
            <form class="w-100 me-3" role="search">
               <div class="input-group ">
                  <span class="input-group-text" id="basic-addon1" style="background-color: #fe6347;color: white;">
                     <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em"
                        width="1em" xmlns="http://www.w3.org/2000/svg">
                        <path
                           d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z">
                        </path>
                     </svg>
                  </span>
                  <input type="text" class="form-control input" placeholder="¿Que desea encontrar?"
                     aria-label="Username" aria-describedby="basic-addon1">
               </div>
            </form>

            <div class="flex-shrink-0 dropdown">
               <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle fs-2"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em"
                     width="1em" xmlns="http://www.w3.org/2000/svg">
                     <path d="M3 4H21V6H3V4ZM9 11H21V13H9V11ZM3 18H21V20H3V18Z"></path>
                  </svg>
               </a>
               <ul class="dropdown-menu text-small shadow">
                  <li><a class="dropdown-item mb-2 py-2 " href="../html/login.html">
                     <svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.29v2.124c0.566 0.247 1.086 0.6 1.536 1.050 0.944 0.944 1.464 2.2 1.464 3.536s-0.52 2.591-1.464 3.536c-0.944 0.944-2.2 1.464-3.536 1.464s-2.591-0.52-3.536-1.464c-0.944-0.944-1.464-2.2-1.464-3.536s0.52-2.591 1.464-3.536c0.45-0.45 0.97-0.803 1.536-1.050v-2.124c-2.891 0.861-5 3.539-5 6.71 0 3.866 3.134 7 7 7s7-3.134 7-7c0-3.171-2.109-5.849-5-6.71zM7 0h2v8h-2z"></path></svg>
                        <span class="container">Iniciar sesión</span>
                     </a></li>
                  <li><a class="dropdown-item mb-2 py-2 " href="../html/registro.html">
                     <svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.29v2.124c0.566 0.247 1.086 0.6 1.536 1.050 0.944 0.944 1.464 2.2 1.464 3.536s-0.52 2.591-1.464 3.536c-0.944 0.944-2.2 1.464-3.536 1.464s-2.591-0.52-3.536-1.464c-0.944-0.944-1.464-2.2-1.464-3.536s0.52-2.591 1.464-3.536c0.45-0.45 0.97-0.803 1.536-1.050v-2.124c-2.891 0.861-5 3.539-5 6.71 0 3.866 3.134 7 7 7s7-3.134 7-7c0-3.171-2.109-5.849-5-6.71zM7 0h2v8h-2z"></path></svg>
                        <span class="container">Registrarse</span>
                     </a></li>
               </ul>
            </div>
         </div>
      </div>
   </header>
   <div class="container-fluid row mb-1 d-flex justify-content-between">
      <div class="cotainer col-3 py-2 shadow-sm row rounded-4" style="align-items: center;">
         <span class="d-block col-12 col-lg-3 col-md-3 fs-1" style="text-align:center; transform: translateY(-10px);">
            <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
               stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
               <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path>
               <path d="M9 10h6"></path>
            </svg>
         </span>
         <h4 class="d-block col-12 col-lg-9 col-md-9 fs-5">Papeleria</h4>
      </div>
      <div class="cotainer col-3 py-2 shadow-sm row rounded-4" style="align-items: center;">
         <span class="d-block col-12 col-lg-3 col-md-3 fs-1" style="text-align:center; transform: translateY(-10px);">
            <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
               stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
               <polyline points="6 9 6 2 18 2 18 9"></polyline>
               <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
               <rect x="6" y="14" width="12" height="8"></rect>
            </svg>
         </span>
         <h4 class="d-block col-12 col-lg-9 col-md-9 fs-5">Electrónica</h4>
      </div>
      <div class="cotainer col-3 py-2 shadow-sm row rounded-4" style="align-items: center;">
         <span class="d-block col-12 col-lg-3 col-md-3 fs-1" style="text-align:center; transform: translateY(-10px);">
            <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
               stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
               <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
               <path d="M5 10v-4a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v4"></path>
               <path d="M16 15v-2a3 3 0 1 1 3 3v3h-14v-3a3 3 0 1 1 3 -3v2"></path>
               <path d="M8 12h8"></path>
               <path d="M7 19v2"></path>
               <path d="M17 19v2"></path>
            </svg>
         </span>
         <h4 class="d-block col-12 col-lg-9 col-md-9 fs-5">Mobiliario</h4>
      </div>
      <div class="cotainer col-3 py-2 shadow-sm row rounded-4" style="align-items: center;">
         <span class="d-block col-12 col-lg-3 col-md-3 fs-1" style="text-align:center; transform: translateY(-10px);">
            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em"
               xmlns="http://www.w3.org/2000/svg">
               <path fill="none" d="M0 0h24v24H0V0z"></path>
               <path
                  d="m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42zM13 20.01 4 11V4h7v-.01l9 9-7 7.02z">
               </path>
               <circle cx="6.5" cy="6.5" r="1.5"></circle>
            </svg>
         </span>
         <h4 class="d-block col-12 col-lg-9 col-md-9 fs-5">Ofertas</h4>
      </div>
   </div>

   <div class="miniImagenDeFondo container-fluid mb-5"></div>
   <!--<div class="container-fluid mb-5">
      <h3 class="text-center">Marcas disponibles</h3>
      <div class="row" style="max-width:600px;width: 90%;margin: 0 auto;">
         <div class="shadow-sm p-3 col-3 col-lg-3 col-md-3">
            <img src="../src/img/marcas/empson.png" alt="marca" class="img-fluid" style="object-fit: contain;">
         </div>
         <div class="shadow-sm p-3 col-3 col-lg-3 col-md-3">
            <img src="../src/img/marcas/gateway.jpg" alt="marca" class="img-fluid" style="object-fit: contain;">
         </div>
         <div class="shadow-sm p-3 col-3 col-lg-3 col-md-3">
            <img src="../src/img/marcas/huawei.png" alt="marca" class="img-fluid" style="object-fit: contain;">
         </div>
         <div class="shadow-sm p-3 col-3 col-lg-3 col-md-3">
            <img src="../src/img/marcas/samsung.png" alt="marca" class="img-fluid" style="object-fit: contain;">
         </div>
      </div>
   </div>-->

   <div class="container-fluid mb-5">
      <h3>Recomendados</h3>
      <div class="row" id="productos">
      </div>
   </div>

   <script>
      const componenteDelProducto = ({ id, name, price, imagen }) => {
         return `
               <div class="shadow-sm p-4 col-6 col-lg-3 col-md-4">
                  <img src="${imagen}" alt="marca" class="img-fluid" style="object-fit: contain;height: 200px;margin: 0 auto;display: block;">
                  <p class="mb-0">${name}</p>
                  <span style="color: #fe6347;">$ ${price} MXN</span><br>
                  <form data-id=${id}>
                     <button class="btn btn-primary" name="btnAccion" value="Agregar" type="submit">Agregar al carrito</button>
                  </form>
               </div>
         `
      }
      document.addEventListener("submit", async e => {
         e.preventDefault();
         let data = new FormData()
         data.append("id_user", sessionStorage.getItem("iduser"))
         data.append("id_product", e.target.dataset.id)
         await fetch("../php/cart/add.php", {
            method: 'POST',
            body: data
         })
            .then(res => res.json())
            .then(json => {
               alert(json.data)
               console.log(json)
            })
            .catch(err => console.log(err))
      })
      const traerporcategoria = async () => {
         await fetch("../php/products/getProductsByCategory.php?category=0",)
            .then(response => response.json())
            .then(response => {
               console.log(response)
               response.data.map(r => {
                  document.getElementById("productos").innerHTML += componenteDelProducto(r)
               });
               console.log(response.data)
            })
            .catch(e => console.log(e))
      }
      traerporcategoria()
   </script>

</body>

</html>